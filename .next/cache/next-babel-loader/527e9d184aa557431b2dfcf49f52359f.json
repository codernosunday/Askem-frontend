{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, useState, useContext } from 'react';\nimport { Spinner } from '../../components/icons';\nimport { publicFetch } from '../../util/fetcher';\nimport styles from './stylestable.module.css';\nimport { FetchContext } from '../../store/fetch';\nconst UserListTable = () => {\n  const {\n    0: userData,\n    1: setUserData\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    authAxios\n  } = useContext(FetchContext);\n  const handleDelete = async username => {\n    try {\n      await publicFetch.delete(`/administrator/deleteuser/${username}`);\n      setUserData(prevData => prevData.filter(user => user.username !== username));\n    } catch (error) {\n      console.error('Error deleting user:', error);\n    }\n  };\n  const fetchUserData = async () => {\n    try {\n      const {\n        data\n      } = await authAxios.get(`/administrator/viewuser`);\n      setUserData(data);\n    } catch (error) {\n      console.error('Error fetching user data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchUserData();\n  }, []);\n  if (loading) {\n    return __jsx(\"div\", {\n      className: styles.loading\n    }, __jsx(Spinner, null));\n  }\n  return __jsx(\"div\", {\n    className: styles.tableContainer\n  }, __jsx(\"table\", {\n    className: styles.table\n  }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", {\n    className: styles.tableHeader\n  }, \"Username\"), __jsx(\"th\", {\n    className: styles.tableHeader\n  }, \"Profile Photo\"), __jsx(\"th\", {\n    className: styles.tableHeader\n  }, \"Created\"), __jsx(\"th\", {\n    className: styles.tableHeader\n  }, \"Actions\"))), __jsx(\"tbody\", null, userData.map(user => __jsx(\"tr\", {\n    key: user.username,\n    className: styles.tableRow\n  }, __jsx(\"td\", {\n    className: styles.tableCell\n  }, user.username), __jsx(\"td\", {\n    className: styles.tableCell\n  }, __jsx(\"img\", {\n    src: user.profilePhoto,\n    alt: `${user.username}'s profile`,\n    className: styles.profilePhoto\n  })), __jsx(\"td\", {\n    className: styles.tableCell\n  }, new Date(user.created).toLocaleDateString()), __jsx(\"td\", {\n    className: styles.tableCell\n  }, __jsx(\"button\", {\n    className: styles.deleteButton,\n    onClick: () => handleDelete(user.username)\n  }, \"Delete\")))))));\n};\nexport default UserListTable;","map":null,"metadata":{},"sourceType":"module"}