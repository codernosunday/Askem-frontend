{"ast":null,"code":"var _jsxFileName = \"W:\\\\askem-project2\\\\client\\\\components\\\\admingroup-form\\\\waitlist\\\\index.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport { GroupAuthContext } from '../../../store/groupauth';\nimport { publicFetch } from '../../../util/fetcher';\nimport { FetchContext } from '../../../store/fetch';\nimport QuestionWrapper from '../../question/question-wrapper';\nimport QuestionStats from '../../question/question-stats';\nimport QuestionSummary from '../../question/question-summary';\nimport ButtonGroup from '../../button-group';\nimport { Spinner } from '../../icons';\nimport styles from './waitList.module.css';\nconst AdminFormGroupQuestion = ({\n  name\n}) => {\n  const router = useRouter();\n  const {\n    authAxios\n  } = useContext(FetchContext);\n  const {\n    0: questions,\n    1: setQuestions\n  } = useState(null);\n  const {\n    0: sortType,\n    1: setSortType\n  } = useState('Votes');\n  const {\n    valueGroup\n  } = useContext(GroupAuthContext);\n  const handleDelete = async questionId => {\n    const res = window.confirm('Unapprove this post?');\n    if (res) {\n      await authAxios.delete(`/question/groupadmin/${questionId}`);\n      router.push(`/groups/${name}`);\n    }\n  };\n  const handleAccept = async questionId => {\n    await authAxios.post(`/group/acceptquestion/${name}/${questionId}`);\n    router.push(`/groups/admin`);\n  };\n  useEffect(() => {\n    try {\n      const fetchQuestion = async () => {\n        const {\n          data\n        } = await publicFetch.get(`/group/${name}/waitlist`);\n        // const { data } = authAxios.post('/group/question', { name: name })\n        setQuestions(data);\n      };\n      const fetchQuestionByTag = async () => {\n        const {\n          data\n        } = await publicFetch.get(`/questions/${router.query.tag}`);\n        setQuestions(data);\n      };\n      if (router.query.tag) {\n        fetchQuestionByTag();\n      } else {\n        fetchQuestion();\n      }\n      setValueGroup(name);\n    } catch (error) {}\n  }, [router.query.tag]);\n  const handleSorting = () => {\n    switch (sortType) {\n      case 'Newest':\n        return (a, b) => new Date(b.created) - new Date(a.created);\n      case 'Oldest':\n        return (a, b) => new Date(a.created) - new Date(b.created);\n      default:\n        break;\n    }\n  };\n  return __jsx(React.Fragment, null, __jsx(ButtonGroup, {\n    borderBottom: true,\n    buttons: ['Newest', 'Oldest'],\n    selected: sortType,\n    setSelected: setSortType,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }), !questions && __jsx(\"div\", {\n    className: \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, __jsx(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  })), questions === null || questions === void 0 ? void 0 : questions.sort(handleSorting()).map(({\n    id,\n    votes,\n    answers,\n    views,\n    title,\n    text,\n    tags,\n    author,\n    created\n  }) => __jsx(QuestionWrapper, {\n    key: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  }, __jsx(QuestionStats, {\n    voteCount: votes.length,\n    answerCount: answers.length,\n    view: views,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }), __jsx(QuestionSummary, {\n    id: id,\n    title: title,\n    tags: tags,\n    author: author,\n    createdTime: created,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: text\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 33\n    }\n  })), __jsx(\"div\", {\n    className: styles.btncontainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }, __jsx(\"button\", {\n    className: styles.btnWaitList,\n    onClick: () => handleAccept(id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 33\n    }\n  }, \"accept\"), __jsx(\"button\", {\n    className: styles.btnWaitList,\n    onClick: () => handleDelete(id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 33\n    }\n  }, \"delete\")))));\n};\nexport default AdminFormGroupQuestion;","map":{"version":3,"names":["React","useEffect","useState","useContext","useRouter","GroupAuthContext","publicFetch","FetchContext","QuestionWrapper","QuestionStats","QuestionSummary","ButtonGroup","Spinner","styles","AdminFormGroupQuestion","name","router","authAxios","questions","setQuestions","sortType","setSortType","valueGroup","handleDelete","questionId","res","window","confirm","delete","push","handleAccept","post","fetchQuestion","data","get","fetchQuestionByTag","query","tag","setValueGroup","error","handleSorting","a","b","Date","created","__jsx","Fragment","borderBottom","buttons","selected","setSelected","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","sort","map","id","votes","answers","views","title","text","tags","author","key","voteCount","length","answerCount","view","createdTime","dangerouslySetInnerHTML","__html","btncontainer","btnWaitList","onClick"],"sources":["W:/askem-project2/client/components/admingroup-form/waitlist/index.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react'\r\nimport { useRouter } from 'next/router'\r\nimport { GroupAuthContext } from '../../../store/groupauth'\r\nimport { publicFetch } from '../../../util/fetcher'\r\nimport { FetchContext } from '../../../store/fetch'\r\nimport QuestionWrapper from '../../question/question-wrapper'\r\nimport QuestionStats from '../../question/question-stats'\r\nimport QuestionSummary from '../../question/question-summary'\r\nimport ButtonGroup from '../../button-group'\r\nimport { Spinner } from '../../icons'\r\nimport styles from './waitList.module.css'\r\nconst AdminFormGroupQuestion = ({ name }) => {\r\n    const router = useRouter()\r\n    const { authAxios } = useContext(FetchContext)\r\n    const [questions, setQuestions] = useState(null)\r\n    const [sortType, setSortType] = useState('Votes')\r\n    const { valueGroup } = useContext(GroupAuthContext)\r\n    const handleDelete = async (questionId) => {\r\n        const res = window.confirm('Unapprove this post?')\r\n        if (res) {\r\n            await authAxios.delete(`/question/groupadmin/${questionId}`)\r\n            router.push(`/groups/${name}`)\r\n        }\r\n    }\r\n    const handleAccept = async (questionId) => {\r\n        await authAxios.post(`/group/acceptquestion/${name}/${questionId}`)\r\n        router.push(`/groups/admin`)\r\n    }\r\n    useEffect(() => {\r\n        try {\r\n            const fetchQuestion = async () => {\r\n                const { data } = await publicFetch.get(`/group/${name}/waitlist`)\r\n                // const { data } = authAxios.post('/group/question', { name: name })\r\n                setQuestions(data)\r\n            }\r\n            const fetchQuestionByTag = async () => {\r\n                const { data } = await publicFetch.get(`/questions/${router.query.tag}`)\r\n                setQuestions(data)\r\n            }\r\n\r\n            if (router.query.tag) {\r\n                fetchQuestionByTag()\r\n            } else {\r\n                fetchQuestion()\r\n            }\r\n            setValueGroup(name)\r\n        }\r\n        catch (error) { }\r\n    }, [router.query.tag])\r\n    const handleSorting = () => {\r\n        switch (sortType) {\r\n            case 'Newest':\r\n                return (a, b) => new Date(b.created) - new Date(a.created)\r\n            case 'Oldest':\r\n                return (a, b) => new Date(a.created) - new Date(b.created)\r\n            default:\r\n                break\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n\r\n            <ButtonGroup\r\n                borderBottom\r\n                buttons={['Newest', 'Oldest']}\r\n                selected={sortType}\r\n                setSelected={setSortType}\r\n            />\r\n            {!questions && (\r\n                <div className=\"loading\">\r\n                    <Spinner />\r\n                </div>\r\n            )}\r\n\r\n            {questions\r\n                ?.sort(handleSorting())\r\n                .map(\r\n                    ({\r\n                        id,\r\n                        votes,\r\n                        answers,\r\n                        views,\r\n                        title,\r\n                        text,\r\n                        tags,\r\n                        author,\r\n                        created\r\n                    }) => (\r\n                        <QuestionWrapper key={id}>\r\n                            <QuestionStats\r\n                                voteCount={votes.length}\r\n                                answerCount={answers.length}\r\n                                view={views}\r\n                            />\r\n                            <QuestionSummary\r\n                                id={id}\r\n                                title={title}\r\n                                tags={tags}\r\n                                author={author}\r\n                                createdTime={created}\r\n                            >\r\n                                <div dangerouslySetInnerHTML={{ __html: text }} />\r\n                            </QuestionSummary>\r\n                            <div className={styles.btncontainer}>\r\n                                <button className={styles.btnWaitList} onClick={() => handleAccept(id)}>accept</button>\r\n                                <button className={styles.btnWaitList} onClick={() => handleDelete(id)}>delete</button>\r\n                            </div>\r\n                        </QuestionWrapper>\r\n                    )\r\n                )}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AdminFormGroupQuestion"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}