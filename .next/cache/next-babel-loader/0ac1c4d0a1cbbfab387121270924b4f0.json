{"ast":null,"code":"var _jsxFileName = \"W:\\\\askem-project2\\\\client\\\\components\\\\admingroup-form\\\\waitlist\\\\index.js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport { GroupAuthContext } from '../../../store/groupauth';\nimport { publicFetch } from '../../../util/fetcher';\nimport { FetchContext } from '../../../store/fetch';\nimport QuestionWrapper from '../../question/question-wrapper';\nimport QuestionStats from '../../question/question-stats';\nimport QuestionSummary from '../../question/question-summary';\nimport ButtonGroup from '../../button-group';\nimport { Spinner } from '../../icons';\nimport styles from './waitList.module.css';\nconst AdminFormGroupQuestion = () => {\n  const router = useRouter();\n  const {\n    authAxios\n  } = useContext(FetchContext);\n  const {\n    0: questions,\n    1: setQuestions\n  } = useState(null);\n  const {\n    0: sortType,\n    1: setSortType\n  } = useState('Votes');\n  const {\n    valueGroup\n  } = useContext(GroupAuthContext);\n  const fetchQuestion = async () => {\n    const {\n      data\n    } = await publicFetch.get(`/group/${valueGroup.inGroup}/waitlist`);\n    setQuestions(data);\n  };\n  const handleDelete = async questionId => {\n    const res = window.confirm('Unapprove this post?');\n    if (res) {\n      await authAxios.delete(`/question/groupadmin/${questionId}`);\n      await fetchQuestion();\n    }\n  };\n  const handleAccept = async questionId => {\n    await authAxios.post(`/group/acceptquestion/${valueGroup.inGroup}/${questionId}`);\n    await fetchQuestion();\n  };\n  useEffect(() => {\n    try {\n      fetchQuestion();\n      const fetchQuestionByTag = async () => {\n        const {\n          data\n        } = await publicFetch.get(`/questions/${router.query.tag}`);\n        setQuestions(data);\n      };\n      if (router.query.tag) {\n        fetchQuestionByTag();\n      } else {\n        fetchQuestion();\n      }\n    } catch (error) {}\n  }, [router.query.tag]);\n  const handleSorting = () => {\n    switch (sortType) {\n      case 'Newest':\n        return (a, b) => new Date(b.created) - new Date(a.created);\n      case 'Oldest':\n        return (a, b) => new Date(a.created) - new Date(b.created);\n      default:\n        break;\n    }\n  };\n  return __jsx(React.Fragment, null, __jsx(ButtonGroup, {\n    borderBottom: true,\n    buttons: ['Newest', 'Oldest'],\n    selected: sortType,\n    setSelected: setSortType,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }), !questions && __jsx(\"div\", {\n    className: \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, __jsx(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  })), questions === null || questions === void 0 ? void 0 : questions.sort(handleSorting()).map(({\n    id,\n    votes,\n    answers,\n    views,\n    title,\n    text,\n    tags,\n    author,\n    created\n  }) => __jsx(QuestionWrapper, {\n    key: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  }, __jsx(QuestionStats, {\n    voteCount: votes.length,\n    answerCount: answers.length,\n    view: views,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 29\n    }\n  }), __jsx(QuestionSummary, {\n    id: id,\n    title: title,\n    tags: tags,\n    author: author,\n    createdTime: created,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: text\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 33\n    }\n  })), __jsx(\"div\", {\n    className: styles.btncontainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 29\n    }\n  }, __jsx(\"button\", {\n    className: styles.btnWaitList,\n    onClick: () => handleAccept(id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 33\n    }\n  }, \"accept\"), __jsx(\"button\", {\n    className: styles.btnWaitList,\n    onClick: () => handleDelete(id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 33\n    }\n  }, \"delete\")))));\n};\nexport default AdminFormGroupQuestion;","map":{"version":3,"names":["React","useEffect","useState","useContext","useRouter","GroupAuthContext","publicFetch","FetchContext","QuestionWrapper","QuestionStats","QuestionSummary","ButtonGroup","Spinner","styles","AdminFormGroupQuestion","router","authAxios","questions","setQuestions","sortType","setSortType","valueGroup","fetchQuestion","data","get","inGroup","handleDelete","questionId","res","window","confirm","delete","handleAccept","post","fetchQuestionByTag","query","tag","error","handleSorting","a","b","Date","created","__jsx","Fragment","borderBottom","buttons","selected","setSelected","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","sort","map","id","votes","answers","views","title","text","tags","author","key","voteCount","length","answerCount","view","createdTime","dangerouslySetInnerHTML","__html","btncontainer","btnWaitList","onClick"],"sources":["W:/askem-project2/client/components/admingroup-form/waitlist/index.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react'\r\nimport { useRouter } from 'next/router'\r\nimport { GroupAuthContext } from '../../../store/groupauth'\r\nimport { publicFetch } from '../../../util/fetcher'\r\nimport { FetchContext } from '../../../store/fetch'\r\nimport QuestionWrapper from '../../question/question-wrapper'\r\nimport QuestionStats from '../../question/question-stats'\r\nimport QuestionSummary from '../../question/question-summary'\r\nimport ButtonGroup from '../../button-group'\r\nimport { Spinner } from '../../icons'\r\nimport styles from './waitList.module.css'\r\nconst AdminFormGroupQuestion = () => {\r\n    const router = useRouter()\r\n    const { authAxios } = useContext(FetchContext)\r\n    const [questions, setQuestions] = useState(null)\r\n    const [sortType, setSortType] = useState('Votes')\r\n    const { valueGroup } = useContext(GroupAuthContext)\r\n    const fetchQuestion = async () => {\r\n        const { data } = await publicFetch.get(`/group/${valueGroup.inGroup}/waitlist`)\r\n        setQuestions(data)\r\n    }\r\n    const handleDelete = async (questionId) => {\r\n        const res = window.confirm('Unapprove this post?')\r\n        if (res) {\r\n            await authAxios.delete(`/question/groupadmin/${questionId}`)\r\n            await fetchQuestion()\r\n        }\r\n    }\r\n    const handleAccept = async (questionId) => {\r\n        await authAxios.post(`/group/acceptquestion/${valueGroup.inGroup}/${questionId}`)\r\n        await fetchQuestion()\r\n    }\r\n    useEffect(() => {\r\n        try {\r\n            fetchQuestion()\r\n            const fetchQuestionByTag = async () => {\r\n                const { data } = await publicFetch.get(`/questions/${router.query.tag}`)\r\n                setQuestions(data)\r\n            }\r\n\r\n            if (router.query.tag) {\r\n                fetchQuestionByTag()\r\n            } else {\r\n                fetchQuestion()\r\n            }\r\n        }\r\n        catch (error) { }\r\n    }, [router.query.tag])\r\n    const handleSorting = () => {\r\n        switch (sortType) {\r\n            case 'Newest':\r\n                return (a, b) => new Date(b.created) - new Date(a.created)\r\n            case 'Oldest':\r\n                return (a, b) => new Date(a.created) - new Date(b.created)\r\n            default:\r\n                break\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n\r\n            <ButtonGroup\r\n                borderBottom\r\n                buttons={['Newest', 'Oldest']}\r\n                selected={sortType}\r\n                setSelected={setSortType}\r\n            />\r\n            {!questions && (\r\n                <div className=\"loading\">\r\n                    <Spinner />\r\n                </div>\r\n            )}\r\n\r\n            {questions\r\n                ?.sort(handleSorting())\r\n                .map(\r\n                    ({\r\n                        id,\r\n                        votes,\r\n                        answers,\r\n                        views,\r\n                        title,\r\n                        text,\r\n                        tags,\r\n                        author,\r\n                        created\r\n                    }) => (\r\n                        <QuestionWrapper key={id}>\r\n                            <QuestionStats\r\n                                voteCount={votes.length}\r\n                                answerCount={answers.length}\r\n                                view={views}\r\n                            />\r\n                            <QuestionSummary\r\n                                id={id}\r\n                                title={title}\r\n                                tags={tags}\r\n                                author={author}\r\n                                createdTime={created}\r\n                            >\r\n                                <div dangerouslySetInnerHTML={{ __html: text }} />\r\n                            </QuestionSummary>\r\n                            <div className={styles.btncontainer}>\r\n                                <button className={styles.btnWaitList} onClick={() => handleAccept(id)}>accept</button>\r\n                                <button className={styles.btnWaitList} onClick={() => handleDelete(id)}>delete</button>\r\n                            </div>\r\n                        </QuestionWrapper>\r\n                    )\r\n                )}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AdminFormGroupQuestion"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}